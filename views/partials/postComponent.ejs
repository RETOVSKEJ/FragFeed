<div class="post" data-atr="<%= post.id %>">
	<a href="<%= post.id %>"><h5 class="post-title"><%= post.title %></h5></a>
	<!-- IF ITS NEW/EDITED POST PREVIEW -->
	<% if(locals.urlPath == '/preview'){ %>
	<img
		id="img-preview"
		src="<%= post.image %>"
		alt="Uploaded Image preview"
	/>
	<script defer>
		// IF USER JUST UPLOADED IMAGE TO PREVIEW
		if (localStorage.getItem('img_data')) {
			const img = document.getElementById('img-preview')
			img.src = localStorage.getItem('img_data')
		}
	</script>
	<!-- IF ITS SINGLE POST OR HOMEPAGE -->
	<% } else { %>
	<!-- IF POST DOES HAVE AN IMAGE -->
	<% if(post.image) { %>
	<a class="post-img" href="/<%= post.id %>"><img id="img-preview" src="<%= post.image %>" alt="Post image" /></a>
	<% } else { %>
		<a class="post-img" href="/<%= post.id %>"><img id="img-preview" src="nophoto.png" alt="No Photo available" /></a>
	<% }} %>
	<p class="post-body"><%= post.body %></p>
	<div class="post-author">
		<p>
			<% if(post.author){ %>Autor: <%= post.author.nick %> <%=
			post.createdAtString %><%}%>
		</p>
		<p>
			<% if(post.edited_by){ %>Edytowane przez: <%= post.edited_by.nick %>
			<%= post.updatedAtString %><%}%>
		</p>
	</div>
	<div class="post-tags">
		<% if(post.tags.length > 0) { %>
		<label for="tags">Tagi: </label>
			<% for(const tag of post.tags) {%>
				<a class="post-tag" href="/tag/<%= tag %>"><%= tag %></a>
			<% } %>
		<% } %>
	</div>
	<div id="post-likes" data-atr="<%= locals?.user?.role %>" class="post-likes">
		<% if(likedPosts.likedPosts?.includes(post.id)){ %>
			<button style="filter:grayscale(0.5)" data-atr="<%= post.id %>" id="upvote-btn" class="fa-solid fa-chevron-up upvote-btn"></button>
			<button disabled data-atr="<%= post.id %>" id="downvote-btn" class="fa-solid fa-chevron-down downvote-btn"></button>
		<% } else if(dislikedPosts.dislikedPosts?.includes(post.id)){ %>
			<button style="filter:grayscale(0.5)" data-atr="<%= post.id %>" id="upvote-btn" class="fa-solid fa-chevron-up upvote-btn"></button>
			<button disabled data-atr="<%= post.id %>" id="downvote-btn" class="fa-solid fa-chevron-down downvote-btn"></button> 
		<% } else { %>
			<button data-atr="<%= post.id %>" id="upvote-btn" class="fa-solid fa-chevron-up upvote-btn"></button>
			<button data-atr="<%= post.id %>" id="downvote-btn" class="fa-solid fa-chevron-down downvote-btn"></button> 
		<% } %>
	</div>
</div>
